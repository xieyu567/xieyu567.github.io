---
title: 疫情期间做数据项目的一点心得
date: 2020-03-10 09:17:57
updated: 
categories: big data
tags: big data
mathjax: true
---
疫情期间，帮家里的领导整理项目数据库，对数据治理有了新的一点认识，也让我重新好好学了一遍数据库。

因为需要处理的是一大堆excel表格，根据以往的经验，我很快想到了用python的pandas包处理，用pandas处理数据很方便，但是读取数据的时间过长，分批读取超过2w条的数据，花了差不多20分钟时间，时间开销是很大的瓶颈，为了提高处理效率，我还是选择了mysql用来存储和简单筛选数据。

用mysql处理数据的时间开销是毫秒级的，比python快得不是一点点。但是查询语句写起来就比python麻烦多了，因为表的格式已经固定了，而且数量太多，难以重构，每次需要联合n张表处理，用内嵌语句的话很繁杂，读起来和写起来都很累。使用临时表能极大地降低维护的成本，避免自己过了几个月就读不懂自己写的代码的尴尬，但是临时表占用内存和IO开销是这个方法的弊端。CTE是我现阶段了解的最优解决方法。使用with将CTE语句将查询结果联合，性能也能够接受。